{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport { userInput } from \"../main\";\nimport { page } from \"../main\";\nlet per_page = 40;\n\n\nexport async function fetchPhotos() {\n    const params = new URLSearchParams({\n      page: page,\n      per_page: per_page,\n    });\n    const apiKey = '42261083-50fe706ca9c2c1734499a9937';\n  const query = userInput.value.trim();\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n        query\n      )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${per_page}`\n    );\n    return response.data;\n  }\n  ","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { gallery } from '../main';\nlet lightbox;\n\n\n\nexport function renderPhotos(data) {\n    const markup = data.hits\n      .map(data => {\n        return `<li class=\"gallery-item\"><a href=\"${data.webformatURL}\">\n              <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n              <p><b>Likes: </b>${data.likes}</p>\n              <p><b>Views: </b>${data.views}</p>\n              <p><b>Comments: </b>${data.comments}</p>\n              <p><b>Downloads: </b>${data.downloads}</p>\n              </li>`;\n      })\n      .join('');\n  \n    if (lightbox) {\n      lightbox.destroy();\n    }\n  \n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox = new SimpleLightbox('.gallery a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n  }\n  const options = {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    animation: 250,\n  };","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nimport { fetchPhotos } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\n\nconst fetchPicturesForm = document.querySelector('.form');\nexport const gallery = document.querySelector('.gallery');\nexport const userInput = document.querySelector('input');\nconst container = document.querySelector('.container');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport let page = 1;\n\n\n\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  container.append(loader);\n};\n\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};\n\n// відображення кнопки \"Load more\"\nconst showLoadMoreButton = () => {\n  loadMoreBtn.style.display = 'block';\n};\n\n//приховання кнопки \"Load more\"\nconst hideLoadMoreButton = () => {\n  loadMoreBtn.style.display = 'none';\n};\n\nfunction shouldHideLoadMoreButton(loadedImagesCount, totalImagesCount) {\n  return loadedImagesCount >= totalImagesCount;\n}\n\n \n \n\nfetchPicturesForm.addEventListener('submit', async e => {\n\n  showLoader();\n  page = 1;\n  e.preventDefault();\n  gallery.innerHTML = '';\n  const userQuery = userInput.value.trim();\n  if (userQuery === '') {\n    hideLoader();\n    return; }\n  try {\n    const photos = await fetchPhotos();\n    renderPhotos(photos);\n    fetchPicturesForm.reset();\n    hideLoader();\n    showLoadMoreButton();\n\n    if (photos.hits.length === 0) {\n      iziToast.error({\n        title: '',\n        backgroundColor: '#EF4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      // Прокрутка сторінки на дві висоти \n      const { height: cardHeight } = document\n        .querySelector('.gallery')\n        .firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n    if (shouldHideLoadMoreButton(gallery.children.length, photos.totalHits)) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    hideLoadMoreButton();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n  try {\n    page += 1;\n    const photos = await fetchPhotos();\n    renderPhotos(photos);\n    hideLoader();\n\n    // Прокрутка сторінки на дві висоти карточки галереї\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (gallery.children.length >= photos.totalHits) {\n      iziToast.warning({\n        title: '',\n        message:\n        \"We're sorry, but you've reached the end of search results.\",\n      });\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n    hideLoadMoreButton();\n  }\n});\n\n\n\n"],"names":["per_page","fetchPhotos","page","apiKey","query","userInput","axios","lightbox","renderPhotos","data","markup","gallery","SimpleLightbox","options","fetchPicturesForm","container","loadMoreBtn","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","shouldHideLoadMoreButton","loadedImagesCount","totalImagesCount","photos","iziToast","cardHeight","error"],"mappings":"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"}